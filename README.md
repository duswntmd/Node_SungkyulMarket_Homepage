# 목 차

1. 설계과제 
2. 연구목적 
3. 설계과제의  필요성 
4. 설계과제의  목표
5. 설계과정  
6. 제작  
7. 제작캡쳐
8. 평가 
9. 결론 


# 1. 설계과제

게시판 , 계정 , 채팅  기능을  포함한  웹서버  구현하기

# 2. 연구목적
1) node.js 구성을  통한  서버와  클라이언트  간의  정보교환에  대한  이해
2) 기존에  있던  거래방식의  재구성을  통한  구조이해
3) 기존에  없던  기능의  추가를  시도하여  더  개성있는  거래사이트  제작시도
4) 제작  시도한  거래사이트의  결과물에  대한  이해

# 3. 설계과제의  필요성 

-Node.js 를  사용하여  서버를  구성해봄으로써  클라이언트와  서버  간에  데이터 를 주고받는 것을 이해하기 위함

-기존의  거래  방식을  게시판  형태로  재구성해보는  것을  통해  기존  거래방식의 구조를 이해하기 위함 

-Node.js 를  이용해  직접  웹  서버를  구현해보는  과정에서  수업  시간에  배운  내 용들을 직접 적용해볼 수 있음

# 4. 설계과제의  목표

실시간  채팅  기능  구현 : 사용자들이  웹  브라우저를  통해  실시간으로  채팅을  할 수  있도록  구현한다 . 이를  위해  WebSocket 과  Socket.IO 를  사용하여  양방향 통신을  구축한다.

MySQL 데이터베이스와  연동 : 프로젝트는  MySQL 데이터베이스와  연결하여 게시물  데이터 , 사용자  정보를  저장하고  조회하는  기능을  구현한다 . 이를  위해 MySQL 연결  설정과  쿼리문을  사용하여  데이터베이스와의  상호작용을  처리한다.

표  1. 본  프로젝트의  현실적  제한요소  항목



|현실적  제한  요소들|내  용  (Content)|
| - | - |
|경제|-  직접적인  거래  시스템을  대체하여  기존의  시스템이  차지하 던  서버  비용을  감축할  수  있다.|
|편리|-  교내  학생들끼리  거래할  수  있다|
|윤리|-  물건을  거래할  때  상호간의  익명성이  보장된다.|
|사회|-  상호간의  신뢰를  학습할  수  있는  프로그램을  제공한다|

# 5. 설계과정

설계  기초이론

참고서적  (Node.js 교과서 , 조현영  지음 )

인터넷자료  (바닐라  자바스크립트  채팅  앱 ! 초보도  할  수  있다 ! Node JS (express), 
https:y/outu.beU/ oKoPP91Qx0)

인터넷자료  (Node.js 웹서비스  로그인  회원가입  구현하기  파트 ,
https:w/ ww.youtube.comw/ atch?v=T4L6RQ2AZUs)

# 소프트웨어  기능블록도

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 003](https://github.com/user-attachments/assets/6e890c0b-43e9-44ee-ab87-77f3931271bd)
![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 004](https://github.com/user-attachments/assets/695c3f4e-ec05-4920-a7d5-8d1b63a1a008)
![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 002](https://github.com/user-attachments/assets/3c9da10f-4b22-46dc-8308-edd9d95a985a)

# 기능적  요구사항  명세서



|ID|요구사항|내용|설명|우선 순위|
| - | - | - | - | - |
|R\_01|메인화면|<p>사용자가 로그인을 </p><p>하면 보이는 페이지이다 .</p>|<p>게시글  검색 , 게시글  작성 , 작성된 게시글 목록과 같은 </p><p>게시판 관련 기능을 </p><p>사용할 수 있는 </p><p>화면을  사용자에게  보여준다 .</p>|1|
|R\_02|계정관리|사용자의 계정 관련 기능을 관리할 수 있다 .|<p>사용자가 계정을 생성하고 계정을 삭제하며 로그인을 하는 </p><p>등  계정을  관리할  수  있다 .</p>|2|
|R\_03|채팅|<p>구매자와 판매자가 채팅을 통해서 </p><p>소통할  수  있다 .</p>|<p>게시글 작성자의 닉네임을 클릭하면 게시글 작성자와 소통을 할 수 있는 채팅창이 </p><p>뜬다 .</p>|3|

# 전체  순서도  (상세설계 )

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 005](https://github.com/user-attachments/assets/1e08ea4f-5ef7-4940-b6fd-9b5252b47718)


# 6. 제작 (Implementation)

1. 제작과정

<핵심  함수  및  루틴  설명 >

-게시판

`db.connect`: MySQL 데이터베이스에  연결하는  함수입니다 .

`mysql.createConnection` 을  사용하여  연결  설정을  구성하고 , `db.connect` 를  호출하여 연결을  수행합니다 .

`app.use(express.urlencoded)`: Express 의  미들웨어를  사용하여  요청의  본문을 해석하도록  설정합니다 . 

`express.urlencoded` 는  URL 인코딩된  데이터를  해석하는데 사용됩니다 .

`multer.diskStorage`: Multer 를  사용하여  파일  업로드를  위한  디스크  스토리지를 설정합니다 . 

파일이  저장될  경로와  파일명을  지정합니다 .

`upload.single`: Multer 를  사용하여  파일  업로드를  처리하는  미들웨어를 생성합니다 . 

`upload.single` 은  단일  파일을  업로드하는데  사용됩니다 .

`app.get`, `app.post`: Express 의  GET 및  POST 라우팅  함수를  사용하여  각각 GET 및  POST 요청을  처리합니다 .



-채팅

- `app`: Express 애플리케이션  객체를  생성합니다 .
  - `server`: `http.createServer` 함수를  사용하여  HTTP 서버를  생성합니다 .
  - `io`: Socket.IO를  이용하여  서버와  클라이언트  간의  실시간  양방향  통신을  위한 소켓  객체를  생성합니다 .

`io.on("connection")`: 클라이언트와의  연결이  성립되었을  때  발생하는 "connection" 이벤트에  대한  이벤트  핸들러를  등록합니다 .

`socket.on("chatting")`: 클라이언트로부터  "chatting" 이벤트를  수신할  때 발생하는  이벤트  핸들러를  등록합니다 .

`io.emit("chatting")`: 받은  채팅  데이터를  모든  클라이언트에게  전송하는  역할을 합니다 .



-계정

`mysql.createPool`: MySQL 데이터베이스와의  연결을  관리하기  위한  풀 (pool)을 생성합니다 . 

풀은  연결  객체를  관리하고  요청에  대한  처리를  병렬로  처리할  수 있도록  합니다 .

`app.use`: Express 미들웨어  함수를  사용하여  정적  파일  경로를  설정하고 , POST요청의  body 데이터를  파싱합니다 .

`app.get` 및  `app.post`: Express 의  라우팅  메소드를  사용하여  클라이언트의  GET 및  POST 요청에  대한  처리를  정의합니다 .

예를  들어 , `/` 경로에  대한  GET 요청이 들어오면  로그인  페이지를  보여주고 , `/process/login` 경로에  대한  POST 요청이 들어오면  로그인  처리를  수행합니다 .

<라이브러리  함수의  가공  및  적용과정  설명 >

-게시판

`mysql.createConnection`: MySQL 라이브러리를  사용하여  데이터베이스  연결객체를  생성합니다 . 

연결  설정을  제공하고 , `createConnection` 을  호출하여  연결을 수행합니다 .

`fs.readFileSync` 및  `path.join`: 파일을  동기적으로  읽고  경로를  조작하기  위해 

Node.js 의  `fs` 및  `path` 모듈을  사용합니다 . `fs.readFileSync` 를  사용하여  HTML파일의  내용을  읽어옵니다 . 

`path.join` 을  사용하여  디렉토리  경로를  조작합니다 .

`db.query`: MySQL 연결  객체를  사용하여  SQL 쿼리를  실행합니다 . `db.query` 를 호출하여  쿼리를  실행하고 , 콜백  함수를  사용하여  결과를  처리합니다 .

`res.redirect`: Express 의  `res.redirect` 함수를  사용하여  페이지  리다이렉션을 수행합니다 . 

`res.redirect('/')` 와  같이  리다이렉션할  경로를  지정하여  사용합니다 .

-채팅

`express.static`: Express 의  `static` 미들웨어를  사용하여  정적  파일을  제공합니다 .

`app.use(express.static)` 을  통해  "src" 디렉토리의  파일들이  정적  파일로  제공되도록 설정합니다 .

`socketIO(server)`: `server` 객체를  사용하여  Socket.IO 서버를  생성합니다 . 이를 통해  클라이언트와  서버  간의  실시간  양방향  통신을  구현할  수  있습니다 .



`moment`: Moment.js 라이브러리를  사용하여  현재  시간을  가져와서  채팅 메시지에  시간  정보를  추가합니다 . 

`moment(new Date()).format("h:ss A")`를  통해 시간을  형식화하여  사용합니다 .

-계정

`mysql` 라이브러리의  `createPool` 함수를  사용하여  MySQL 데이터베이스와의 연결을  관리하는  풀을  생성합니다 . 

`dbconfig.json` 파일에서  읽어온  호스트 , 사용자 , 비밀번호 , 포트 , 데이터베이스  정보를  `createPool` 함수에  인자로  전달하여  풀을 생성합니다.

`pool.getConnection` 함수를  사용하여  풀에서  연결  객체를  얻습니다. 

연결 객체를  통해  SQL 쿼리를  실행하고 , 연결  객체의  `release` 메소드를  호출하여  연결을 반환합니다 . 이렇게  풀과  연결  객체를  사용하여  데이터베이스  작업을  수행합니다.

1) 계정  관리  기능

1. MySQL 연결  관리 : `mysql.createPool()` 함수를  사용하여  MySQL 데이터베이스와의  연결  풀을  생성하고, `pool.getConnection()` 함수를  통해  연결을  얻는다.
2. Express 라우팅  핸들러 : Express 애플리케이션의  라우팅  핸들러를  사용하여  경로 및  요청  유형에  따른  기능을  처리한다.
2. 데이터베이스  작업 : `conn.query()` 함수를  사용하여  SQL 쿼리를  실행하고  결과를 반환한다 . 이를  통해  데이터베이스와의  상호작용을 구현한다.
2. POST 데이터  파싱 : `express.urlencoded()` 및  `express.json()` 미들웨어  함수를  사용 하여  POST 요청의  데이터를  파싱한다.
2. 정적  파일  제공 : `serve-static` 미들웨어  함수를  사용하여  Express 애플리케이션이 정적  파일을  제공할  수  있도록  한다.

MySQL 및  Express 라이브러리를  사용하며 , 이를  통해  데이터베이스  연결 , 라우팅  핸 들러  등을  구현하고  애플리케이션과  데이터베이스  간의  상호작용을  가능하게  한다.

2) 채팅  기능
1. `io.on("connection", (socket) => { ... })`: 클라이언트와의  연결  이벤트를  처리한다 . 클라이언트로부터  "chatting" 이벤트를  수신하여  다른  클라이언트에게  채팅  메시지를 전달한다.
1. `socket.on("chatting", (data) => { ... })`: 클라이언트로부터  "chatting" 이벤트를  수신 하여  전송된  채팅  메시지  데이터를  처리한다.
1. `io.emit("chatting", { ... })`: 서버에서  받은  채팅  메시지를  다른  클라이언트에게  전달한다.
1. Express 를  사용하여  정적  파일을  제공하고 , Socket.IO를  사용하여  실시간  양방향 통신을  처리한다.
1. 정적  파일  제공은  `app.use(express.static(path.join(\_\_dirname, "src")))`를  사용하여 구현한다.
1. Socket.IO는  HTTP 서버와  함께  사용되며 , `io.on("connection", (socket) => { ... })` 를  사용하여  클라이언트와의  연결  이벤트를  처리한다.
1. Moment.js 라이브러리를  사용하여  현재  시간을  포맷팅하여  채팅  메시지에  추가한다.

Express, Socket.IO, Moment.js 를  가공하고  적용하여  실시간  채팅  애플리케이션을  구현한다.

3) 게시판  기능
1. MySQL 연결  설정  및  연결 : MySQL과의  연결을  설정하고  연결  상태를  확인한다.
1. Express 미들웨어  설정 : 폼  데이터  파싱을  위한  설정과  정적  파일  제공을  설정한다.
1. Multer 설정 : 이미지  업로드를  위한  설정을  추가한다.
1. 라우팅  및  핸들러  함수 : 게시물  목록  조회 , 게시물  생성 , 수정 , 삭제  등의  기능을 처리하는  핸들러  함수를  정의한다.
1. MySQL 쿼리 : MySQL 데이터베이스에  쿼리를  실행하여  게시물  데이터를  조회 , 생 성 , 수정 , 삭제한다.
1. 기능  모듈  간의  인터페이스는  Express 를  사용하여  웹  서버를  생성하고 , MySQL과 Multer 를  사용하여  데이터베이스와  파일  업로드를  처리한다.
1. 파일  시스템과  경로  관련  작업을  위해  `fs`와  `path` 모듈을  사용하며 , 게시물  데이 터를  HTML 템플릿에  적용하여  동적으로  웹  페이지를  생성한다.

Express, MySQL, Multer 등을  가공하고 적용하여  게시판  애플리케이션을  구현한다 .

2. 제작시  문제점  및  개선사항

MySQL을  이용해  Node.js 를  연결함에  있어서  MySQL의  정보와  일치해야  하여  정보 를  정확히  작성해야 했다 .
게시판을  이용한  정보이동을  HTML을  JS파일을  거쳐  MySQL에  정보를  저장하고  저 장한  것을  JS를  통해  다음  HTML로  넘기기  힘들었다 . 개선점으로  MySQL을  구글링하 여  정보저장  기능을  보고  만든뒤  CRUD를  이용하여  JS를  통해  HTML을  넘기게  만들었다 .

# 7. 제작캡쳐

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 006](https://github.com/user-attachments/assets/c6c3d48f-af1a-4606-97a2-caf96633a090)
![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 007](https://github.com/user-attachments/assets/2580ed05-4ccb-4c21-83da-328697223099)

계정  생성  및  로그인을  할  수  있는  창이다 .

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 008](https://github.com/user-attachments/assets/4206f22f-a305-4edb-bfdf-4377b97eebad)

계정을  생성하면  위와  같이  데이터  베이스에  정보가  넘어가게  된다 .

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 009](https://github.com/user-attachments/assets/58c94bec-d1fc-4ea5-9680-775440895597)

회원  계정  삭제를  할  수  있는  창이다 .

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 010](https://github.com/user-attachments/assets/4ce1bf65-4815-4d34-af8b-25965ecac5b8)

작성글  목록게시판 , 검색창 , 게시글  작성창이다 .

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 011](https://github.com/user-attachments/assets/dc27cd69-885b-4bb4-8d6d-586820c65c3d)

검색창에  검색어를  검색했을  때  검색된  글들이  나온다 .

![Aspose Words 2a60c7af-e60b-43a8-8912-af705286373a 012](https://github.com/user-attachments/assets/b707f8c5-cb20-4683-910b-310eb27ebd09)

게시글을  작성하면  위와  같이  데이터베이스에  게시글  정보가  넘어간다 .

# 8. 평가 
정량적 /정성적  목표달성도  평가

|항목|목표값|달성률  (%)|비고|
| - | - | - | - |
|실시간 채팅 기능 구현|<p>사용자들이 웹 브라우저를 통해 실시간으로 채팅을 할 </p><p>수  있도록  구현한다 .</p>|100%|<p>WebSocket 과 Socket.IO 를 </p><p>사용하여 양방향 </p><p>통신을 구축한다 .</p>|
|MySQL 데이터 베이스와  연동|<p>프로젝트는  MySQL 데이터베이스와 </p><p>연결하여 게시물 데이터 , 사용자  정보를 저장하고 조회하는 </p><p>기능을  구현한다 .</p>|100%|<p>MySQL 연결 설정과 쿼리문을 </p><p>사용하여 데이터베이스와 의 상호작용을 처리한다 .</p>|

현실적  제한요소  달성도  평가

|현실적 제한 요소들|목표|달성결과|
| - | - | - |
|경제|-  직접적인  거래  시스템을  대체 하여  기존의  시스템이  차지하던 서버  비용을  감축할  수  있다.|100%|
|편리|-  교내  학생들끼리  거래할  수 있다|100%|
|윤리|-  물건을  거래할  때  상호간의 익명성이  보장된다.|100%|
|사회|<p>-  상호간의  신뢰를  학습할  수 있는  프로그램을 </p><p>제공한다</p>|100%|

기능적  요구사항  달성도  평가

|ID|요구사항|내용|우선 순위|<p>달성률 </p><p>(%)</p>|비고|
| - | - | - | - | - | - |
|R\_01|메인화면|<p>사용자가 로그인을 </p><p>하면 보이는 페이지이다 .</p>|1|100%||
|R\_02|계정관리|사용자의 계정 관련 기능을 관리할 수 있다 .|2|100%||
|R\_03|채팅|<p>구매자와 판매자가 채팅을 통해서 </p><p>소통할  수  있다 .</p>|3|100%||

# 9. 결론 

위 코드를 구현하면서 다양한 기술과 라이브러리를 사용하여 웹 애플리케이션 을  개발하였다 . 이를  통해  개발의  다양성과  모듈화 , 데이터베이스  관리 , 파일 업로드  처리  등에  대한  경험을  얻었고 , 웹  애플리케이션  구현을  직접  해볼  수 있는  기회였다 . 이러한  경험을  통해  웹  개발에  대한  이해와  능력을  향상시키고 성장할  수  있었다 .

